#include "StageManager.h"

///////////////////////////////////////////////////////////////////////
// コンストラクタ
///////////////////////////////////////////////////////////////////////
StageManager::StageManager(){}

StageManager::StageManager(ISubject& subject){
    for(int i = 0; i < kStageCount_; i++){
        stages_[i] = std::make_unique<Stage>(subject);
        stages_[i]->SetStageNo(i);
    }
}

///////////////////////////////////////////////////////////////////////
// デストラクタ
///////////////////////////////////////////////////////////////////////
StageManager::~StageManager(){}

///////////////////////////////////////////////////////////////////////
// 初期化
///////////////////////////////////////////////////////////////////////
void StageManager::Initialize(){}

///////////////////////////////////////////////////////////////////////
// 終了処理
///////////////////////////////////////////////////////////////////////
void StageManager::Finalize(){}

///////////////////////////////////////////////////////////////////////
// 更新
///////////////////////////////////////////////////////////////////////
void StageManager::Update(){
    for(auto& stage : stages_){
        stage->Update();
    }

}

///////////////////////////////////////////////////////////////////////
// 描画
///////////////////////////////////////////////////////////////////////
void StageManager::Draw(){
    for(auto& stage : stages_){
        stage->Draw();
    }
}


///////////////////////////////////////////////////////////////////////
// フレーム開始時の処理
///////////////////////////////////////////////////////////////////////
void StageManager::BeginFrame(){
    for(auto& stage : stages_){
        stage->BeginFrame();
    }
}


///////////////////////////////////////////////////////////////////////
// フレーム終了時の処理
///////////////////////////////////////////////////////////////////////
void StageManager::EndFrame(){
    for(auto& stage : stages_){
        stage->EndFrame();
    }
}

///////////////////////////////////////////////////////////////////////
// コライダーを渡す
///////////////////////////////////////////////////////////////////////
void StageManager::HandOverColliders(){
    stages_[currentStageNo_]->HandOverColliders();
}
