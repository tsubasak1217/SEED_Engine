#include "Scene_Clear.h"

//states
#include "State/ClearState_Enter.h"

////////////////////////////////////////////////////////////////////////////////////////////
//
// コンストラクタ・デストラクタ
//
////////////////////////////////////////////////////////////////////////////////////////////
Scene_Clear::Scene_Clear(){}

Scene_Clear::~Scene_Clear(){}


////////////////////////////////////////////////////////////////////////////////////////////
//
// 初期化
//
////////////////////////////////////////////////////////////////////////////////////////////
void Scene_Clear::Initialize(){
    //=========================== dinosaur =======================//
    dinosaur_ = std::make_unique<Model>();
    dinosaur_ = std::make_unique<Model>("dinosaur.gltf");
    dinosaur_->UpdateMatrix();
    dinosaur_->isRotateWithQuaternion_ = false;
    dinosaur_->isParentScale_ = false;

    //=========================== egg ===========================//
    egg_ = std::make_unique<Model>();
    egg_ = std::make_unique<Model>("egg.gltf");
    egg_->UpdateMatrix();
    egg_->isRotateWithQuaternion_ = false;
    egg_->isParentScale_ = false;

    //=========================== state =========================//
    currentState_ = std::make_unique<ClearState_Enter>(this);

}

////////////////////////////////////////////////////////////////////////////////////////////
//
// 終了処理
//
////////////////////////////////////////////////////////////////////////////////////////////
void Scene_Clear::Finalize(){}

////////////////////////////////////////////////////////////////////////////////////////////
//
// 更新
//
////////////////////////////////////////////////////////////////////////////////////////////
void Scene_Clear::Update(){
    //=========================== Object =======================//
    dinosaur_->Update();
    egg_->Update();

    //=========================== State =======================//
    if(currentState_){
        currentState_->Update();
    }
}

////////////////////////////////////////////////////////////////////////////////////////////
//
// 描画
//
////////////////////////////////////////////////////////////////////////////////////////////
void Scene_Clear::Draw(){
    //=========================== Object =======================//
    dinosaur_->Draw();
    egg_->Draw();

    //=========================== State =======================//
    if(currentState_){
        currentState_->Draw();
    }
}

////////////////////////////////////////////////////////////////////////////////////////////
//
// フレーム開始処理
//
////////////////////////////////////////////////////////////////////////////////////////////
void Scene_Clear::BeginFrame(){
    Scene_Base::BeginFrame();

    if(currentState_){
        currentState_->BeginFrame();
    }
}

////////////////////////////////////////////////////////////////////////////////////////////
//
// フレーム終了処理
//
////////////////////////////////////////////////////////////////////////////////////////////
void Scene_Clear::EndFrame(){
    if(currentState_){
        currentState_->EndFrame();
    }
}


/////////////////////////////////////////////////////////////////////////////////////////
//
//  すべてのコライダーをコリジョンマネージャに渡す
//
/////////////////////////////////////////////////////////////////////////////////////////
void Scene_Clear::HandOverColliders(){}
